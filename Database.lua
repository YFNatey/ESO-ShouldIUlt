ShouldIUlt.buffDatabase = {
    -- TARGET DEBUFFS
    bossDebuffs = {
        vulnerability = {
            [106754] = "Major Vulnerability",
            [106755] = "Major Vulnerability",
            [106758] = "Major Vulnerability",
            [106760] = "Major Vulnerability",
            [106762] = "Major Vulnerability",
            [122177] = "Major Vulnerability",
            [163060] = "Major Vulnerability",
            [42062] = "Minor Vulnerability",
            [51434] = "Minor Vulnerability",
            [61782] = "Minor Vulnerability",
            [68359] = "Minor Vulnerability",
            [79715] = "Minor Vulnerability",
            [79717] = "Minor Vulnerability",
            [79720] = "Minor Vulnerability",
            [79723] = "Minor Vulnerability",
            [79726] = "Minor Vulnerability",
            [79843] = "Minor Vulnerability",
            [79844] = "Minor Vulnerability",
            [79845] = "Minor Vulnerability",
            [79846] = "Minor Vulnerability",
            [81519] = "Minor Vulnerability",
            [117025] = "Minor Vulnerability",
            [118613] = "Minor Vulnerability",
            [120030] = "Minor Vulnerability",
            [124803] = "Minor Vulnerability",
            [124804] = "Minor Vulnerability",
            [124806] = "Minor Vulnerability",
            [130155] = "Minor Vulnerability",
            [130168] = "Minor Vulnerability",
            [130173] = "Minor Vulnerability",
            [185920] = "Minor Vulnerability",
            [185449] = "Minor Vulnerability",
            [186754] = "Minor Vulnerability",
            [191299] = "Minor Vulnerability",
            [185923] = "Minor Vulnerability",
            [183271] = "Minor Vulnerability",
            [214992] = "Minor Vulnerability",
            [216255] = "Minor Vulnerability",
            [217658] = "Minor Vulnerability",
            [208043] = "Minor Vulnerability",
            [221728] = "Minor Vulnerability",
            [218989] = "Minor Vulnerability",
            [222722] = "Minor Vulnerability",
            [204879] = "Minor Vulnerability",
            [228104] = "Minor Vulnerability",
            [228115] = "Minor Vulnerability",
            [228118] = "Minor Vulnerability",
            [238097] = "Minor Vulnerability",
            [238269] = "Minor Vulnerability",
            [224387] = "Minor Vulnerability",

        },
        brittle = {
            [145977] = "Major Brittle",
            [167681] = "Major Brittle",
            [145975] = "Minor Brittle"
        },
        breach = {
            [38688] = "Minor Breach",
            [61742] = "Minor Breach",
            [68588] = "Minor Breach",
            [83031] = "Minor Breach",
            [61743] = "Major Breach"
        },
        offBalance = {
            [62988] = "Off-Balance",  -- long wall
            [63108] = "Off-Balance",  -- dodge roll
            [130145] = "Off-Balance", -- mag birb
            [23808] = "Off-Balance",  -- lava whip
            [20806] = "Off-Balance",  -- molten whip
            [34117] = "Off-Balance",  -- flame lash
            [45902] = "Off-Balance",  -- generic off balance
            [120014] = "Off-Balance", -- iron atronach
            [25256] = "Off-Balance",  -- veiled strike
            [34733] = "Off-Balance",  -- surprise attack
            [34737] = "Off-Balance",  -- concealed weapon
            [49205] = "Off-Balance",  -- focused charge
            [49213] = "Off-Balance",  -- explosive charge
            [130129] = "Off-Balance", -- unmorphed birb
            [125750] = "Off-Balance", -- ruinous scythe
            [131562] = "Off-Balance", -- dizzy swing
            [62968] = "Off-Balance",  -- unmorphed wall
            [39077] = "Off-Balance",  -- explosive wall

        },
        setDebuffs = {
            [126597] = "Zens",
            [127070] = "Martial-Knowledge"
        },
        setBuffs = {
            [154737] = "Sul-Xan"
        }
    },

    --PLAYER BUFFS
    slayer = {
        [93109] = "Major Slayer",
        [93120] = "Major Slayer",
        [93442] = "Major Slayer",
        [121871] = "Major Slayer",
        [137986] = "Major Slayer",
        [76617] = "Minor Slayer",
        [147226] = "Minor Slayer",
        [181840] = "Minor Slayer",
    },
    brutality = {
        [23673] = "Major Brutality",
        [36903] = "Major Brutality",
        [45228] = "Major Brutality",
        [61662] = "Minor Brutality",
        [62060] = "Major Brutality",
        [62147] = "Major Brutality",
        [61798] = "Minor Brutality",
        [61799] = "Minor Brutality",
        [79281] = "Minor Brutality",
        [61665] = "Minor Brutality",
    },

    sorcery = {
        [33317] = "Major Sorcery",
        [45227] = "Major Sorcery",
        [62062] = "Major Sorcery",
        [61687] = "Major Sorcery",
        [62240] = "Major Sorcery",
        [63227] = "Major Sorcery",
        [61685] = "Minor Sorcery",
        [62800] = "Minor Sorcery",
        [62799] = "Minor Sorcery",
        [79221] = "Minor Sorcery",
    },
    prophecy = {
        [61689] = "Major Prophecy",
        [47193] = "Major Prophecy",
        [62747] = "Major Prophecy",
        [61691] = "Minor Prophecy",
        [62319] = "Minor Prophecy",
        [62320] = "Minor Prophecy",
        [79447] = "Minor Prophecy",
    },
    savagery = {
        [61667] = "Major Savagery",
        [45241] = "Major Savagery",
        [45466] = "Major Savagery",
        [61666] = "Minor Savagery",
        [61882] = "Minor Savagery",
        [61898] = "Minor Savagery",
        [79453] = "Minor Savagery",
    },
    berserk = {
        [61744] = "Minor Berserk",
        [62636] = "Minor Berserk",
        [80471] = "Minor Berserk",
        [114862] = "Minor Berserk",
        [36973] = "Major Berserk",
        [61745] = "Major Berserk",
        [62195] = "Major Berserk",
        [84310] = "Major Berserk",
        [134094] = "Major Berserk",
        [134433] = "Major Berserk",
        [137206] = "Major Berserk",
        [143992] = "Major Berserk",
        [147421] = "Major Berserk",
        [150757] = "Major Berserk",
        [172866] = "Major Berserk",
        [188408] = "Major Berserk",
        [219674] = "Major Berserk",
        [221601] = "Major Berserk",
        [237956] = "Major Berserk",
    },
    courage = {
        [121878] = "Minor Courage",
        [137348] = "Minor Courage",
        [147417] = "Minor Courage",
        [159310] = "Minor Courage",
        [109084] = "Minor Courage",
        [109966] = "Major Courage"
    },
    force = {
        [61746] = "Minor Force",
        [68595] = "Minor Force",
        [68628] = "Minor Force",
        [76564] = "Minor Force",
        [80984] = "Minor Force",
        [80986] = "Minor Force",
        [85611] = "Minor Force",
        [103521] = "Minor Force",
        [103708] = "Minor Force",
        [103712] = "Minor Force",
        [106861] = "Minor Force",
        [176852] = "Minor Force",
        [188427] = "Minor Force",
        [214863] = "Minor Force",
        [46522] = "Major Force",
        [46533] = "Major Force",
        [46536] = "Major Force",
        [46539] = "Major Force",
        [154830] = "Major Force",
        [176849] = "Major Force",
        [249160] = "Major Force",
        [40225] = "Major Force",
        [85154] = "Major Force",
        [221602] = "Major Force",
    },
    warhorn = {
        [40224] = "Aggressive Horn"
    },

    heroism = {
        [61708] = "Minor Heroism",
        [62505] = "Minor Heroism",
        [85593] = "Minor Heroism",
        [113284] = "Minor Heroism",
        [61709] = "Major Heroism"
    },
    protection = {
        [35739] = "Minor Protection",
        [40171] = "Minor Protection",
        [40185] = "Minor Protection",
        [61721] = "Minor Protection",
    },
    fortitude = {
        [26213] = "Minor Fortitude",
        [26220] = "Minor Fortitude",
        [61697] = "Minor Fortitude",
        [124701] = "Minor Fortitude",
    },
    evasion = {
        [61715] = "Minor Evasion",
        [114858] = "Minor Evasion",
        [187865] = "Minor Evasion",
        [184931] = "Minor Evasion",
    },
    resolve = {
        [37247] = "Minor Resolve",
        [61693] = "Minor Resolve",
        [61817] = "Minor Resolve",
        [62626] = "Minor Resolve",
    },
    PowerfulAssault = {
        [61771] = "PowerfulAssault"
    },
    abyssalInk = {
        [183008] = "Abyssal Ink",
    }
}


ShouldIUlt.buffTypeMap = {
    vulnerability = {
        setting = "trackVulnerability",
        major = "Major Vulnerability",
        minor = "Minor Vulnerability"
    },
    slayer = {
        setting = "trackSlayer",
        major = "Major Slayer",
        minor = "Minor Slayer"
    },

    brutality = {
        setting = "trackWeaponSpellDamage",
        major = "Major Brutality",
        minor = "Minor Brutality"
    },
    sorcery = {
        setting = "trackWeaponSpellDamage",
        major = "Major Sorcery",
        minor = "Minor Sorcery"
    },

    prophecy = {
        setting = "trackWeaponSpellCrit",
        major = "Major Prophecy",
        minor = "Minor Prophecy"
    },
    savagery = {
        setting = "trackWeaponSpellCrit",
        major = "Major Savagery",
        minor = "Minor Savagery"
    },

    resolve = {
        setting = "trackResolve",
        major = "Major Resolve",
        minor = "Minor Resolve"
    },
    brittle = {
        setting = "trackBrittle",
        major = "Major Brittle",
        minor = "Minor Brittle"
    },
    offBalance = {
        setting = "trackOffBalance",
        major = nil,
        minor = "Off-Balance"
    },
    force = {
        setting = "trackForce",
        major = "Major Force",
        minor = "Minor Force"
    },
    heroism = {
        setting = "trackHeroism",
        major = "Major Heroism",
        minor = "Minor Heroism"
    },
    protection = {
        setting = "trackProtection",
        major = nil,
        minor = "Minor Protection"
    },
    fortitude = {
        setting = "trackFortitude",
        major = nil,
        minor = "Minor Fortitude"
    },
    evasion = {
        setting = "trackEvasion",
        major = nil,
        minor = "Minor Evasion"
    },
    berserk = {
        setting = "trackBerserk",
        major = "Major Berserk",
        minor = "Minor Berserk"
    },
    courage = {
        setting = "trackCourage",
        major = "Major Courage",
        minor = "Minor Courage"
    },
    breach = {
        setting = "trackBreach",
        major = "Major Breach",
        minor = "Minor Breach"
    },
    PowerfulAssault = {
        setting = "trackPA",
        major = nil,
        minor = "PowerfulAssault"
    },
    -- For testing
    abyssalInk = {
        setting = "trackAbyssalInk",
        major = nil,
        minor = "Abyssal Ink"
    },
    warhorn = {
        setting = "trackWarhorn",
        major = nil,
        minor = "Agressive Horn"
    }
}


function ShouldIUlt:GetBuffIcon(buffName, suppressFallback)
    local iconMap = {
        -- Major buffs
        ["Major Vulnerability"] = "/esoui/art/icons/ability_debuff_major_vulnerability.dds",
        ["Major Slayer"] = "/esoui/art/icons/ability_buff_major_slayer.dds",
        ["Major Brutality"] = "/esoui/art/icons/ability_buff_major_brutality.dds",
        ["Major Sorcery"] = "/esoui/art/icons/ability_buff_major_sorcery.dds",
        ["Major Prophecy"] = "/esoui/art/icons/ability_buff_major_prophecy.dds",
        ["Major Savagery"] = "/esoui/art/icons/ability_buff_major_savagery.dds",
        ["Major Resolve"] = "/esoui/art/icons/ability_buff_major_resolve.dds",
        ["Major Ward"] = "/esoui/art/icons/ability_buff_major_ward.dds",
        ["Major Endurance"] = "/esoui/art/icons/ability_buff_major_endurance.dds",
        ["Major Intellect"] = "/esoui/art/icons/ability_buff_major_intellect.dds",
        ["Major Brittle"] = "/esoui/art/icons/ability_debuff_major_brittle.dds",
        ["Major Force"] = "/esoui/art/icons/ability_buff_major_force.dds",
        ["Major Berserk"] = "/esoui/art/icons/ability_buff_major_berserk.dds",
        ["Major Breach"] = "/esoui/art/icons/ability_buff_major_breach.dds",
        ["Major Heroism"] = "/esoui/art/icons/ability_buff_major_heroism.dds",
        ["Off-Balance"] = "/esoui/art/icons/ability_debuff_offbalance.dds",
        ["Off-Balance Immunity"] = "/esoui/art/icons/ability_debuff_offbalance.dds",
        ["Major Courage"] = "/esoui/art/icons/ability_buff_major_courage.dds",
        -- Minor buffs
        ["Minor Vulnerability"] = "/esoui/art/icons/ability_debuff_minor_vulnerability.dds",
        ["Minor Slayer"] = "/esoui/art/icons/ability_buff_minor_slayer.dds",
        ["Minor Brutality"] = "/esoui/art/icons/ability_buff_minor_brutality.dds",
        ["Minor Sorcery"] = "/esoui/art/icons/ability_buff_minor_sorcery.dds",
        ["Minor Prophecy"] = "/esoui/art/icons/ability_buff_minor_prophecy.dds",
        ["Minor Savagery"] = "/esoui/art/icons/ability_buff_minor_savagery.dds",
        ["Minor Resolve"] = "/esoui/art/icons/ability_buff_minor_resolve.dds",
        ["Minor Endurance"] = "/esoui/art/icons/ability_buff_minor_endurance.dds",
        ["Minor Intellect"] = "/esoui/art/icons/ability_buff_minor_intellect.dds",
        ["Minor Brittle"] = "/esoui/art/icons/ability_debuff_minor_brittle.dds",
        ["Minor Aegis"] = "/esoui/art/icons/ability_buff_minor_aegis.dds",
        ["Minor Berserk"] = "/esoui/art/icons/ability_buff_minor_berserk.dds",
        ["Minor Breach"] = "/esoui/art/icons/ability_debuff_minor_breach.dds",
        ["Minor Courage"] = "/esoui/art/icons/ability_buff_minor_courage.dds",
        ["Minor Cowardice"] = "/esoui/art/icons/ability_debuff_minor_cowardice.dds",
        ["Minor Defile"] = "/esoui/art/icons/ability_debuff_minor_defile.dds",
        ["Minor Enervation"] = "/esoui/art/icons/ability_debuff_minor_enervation.dds",
        ["Minor Evasion"] = "/esoui/art/icons/ability_buff_minor_evasion.dds",
        ["Minor Expedition"] = "/esoui/art/icons/ability_buff_minor_expedition.dds",
        ["Minor Force"] = "/esoui/art/icons/ability_buff_minor_force.dds",
        ["Minor Fortitude"] = "/esoui/art/icons/ability_buff_minor_fortitude.dds",
        ["Minor Heroism"] = "/esoui/art/icons/ability_buff_minor_heroism.dds",
        ["Minor Lifesteal"] = "/esoui/art/icons/ability_buff_minor_lifesteal.dds",
        ["Minor Magickasteal"] = "/esoui/art/icons/ability_buff_minor_magickasteal.dds",
        ["Minor Maim"] = "/esoui/art/icons/ability_debuff_minor_maim.dds",
        ["Minor Mangle"] = "/esoui/art/icons/ability_debuff_minor_mangle.dds",
        ["Minor Mending"] = "/esoui/art/icons/ability_buff_minor_mending.dds",
        ["Minor Protection"] = "/esoui/art/icons/ability_buff_minor_protection.dds",
        ["Minor Timidity"] = "/esoui/art/icons/ability_debuff_minor_timidity.dds",
        ["Minor Toughness"] = "/esoui/art/icons/ability_buff_minor_toughness.dds",
        ["Minor Uncertainty"] = "/esoui/art/icons/ability_debuff_minor_uncertainty.dds",
        ["Minor Vitality"] = "/esoui/art/icons/ability_buff_minor_vitality.dds",
        ["PowerfulAssault"] = "/esoui/art/icons/ability_healer_019.dds",
        ["Abyssal Ink"] = "/esoui/art/icons/ability_scribing_grimoire_005.dds",
    }
    -- Fallback if icon doesnt exist
    if suppressFallback then
        return iconMap[buffName]
    end

    return iconMap[buffName] or "/esoui/art/icons/ability_weapon_001.dds"
end

function ShouldIUlt:FindBuffNameInDatabase(abilityId)
    for category, data in pairs(self.buffDatabase) do
        if category == "bossDebuffs" then
            for subcat, buffs in pairs(data) do
                if buffs[abilityId] then
                    return buffs[abilityId]
                end
            end
        else
            if data[abilityId] then
                return data[abilityId]
            end
        end
    end
    return nil
end
